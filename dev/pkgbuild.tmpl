# Contributor: jose <jose1711 [at] gmail (dot) com>
# Maintainer:  Mario De Weerd <bt747@bt747.org>
pkgname=bt747_dev
pkgver=%VERSION%
pkgrel=1
pkgdesc="datalogger device control for mtk-chipset based loggers"
arch=('i686' 'x86_64')
url="http://www.bt747.org/"
license=("GPL-3")
depends=('java-runtime' 'xorg-fonts-type1')
install=bt747.install
options=('!strip')
source=("http://downloads.sourceforge.net/project/bt747/Development/BT747_%VERSION%_full.zip" "http://soft.bt747.org/icon/BT747_icon48x48x8.gif" "bt747.desktop")
md5sums=('%MD5SUM%'
		 'ad4f7947ba2f9471a9e24f299d80a6a4'
         '9bcc29d20ca24b85ae074573e5bd774c')
build() {
echo
}
_installdir="${pkgdir}/usr/share/java/bt747"
_bindir="${pkgdir}/usr/bin"

package() {
mkdir -p ${_bindir}
mkdir -p ${_installdir}
/bin/sed -i '/ROOT_DIR=/s%.*%ROOT_DIR='${_installdir}'%' run_j2se.sh
chmod 644 lib/*.jar dist/*.jar
/bin/tar cf - --exclude=*.exe --exclude=*.bat --exclude=src* * | ( cd ../pkg/usr/share/java/bt747/; tar xfp - )
ln -s ${_installdir}/run_j2se.sh ${_bindir}/bt747

install -d -m 0755 "${pkgdir}/usr/"{share/applications,share/pixmaps}
install -D -m644 $srcdir/bt747.desktop ${pkgdir}/usr/share/applications/bt747.desktop
install -D -m644 $srcdir/BT747_icon48x48x8.gif "${pkgdir}/usr/share/pixmaps/bt747.png"
}
